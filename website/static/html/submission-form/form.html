<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App Submission Form</title>
  <link href="./style.css" rel="stylesheet" />
  <link href="./select2.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</head>

<body>
  <form class="submission-form" method="POST"
    action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
    <input type="hidden" name="oid" value="00D5e000001Oxvi" />
    <input type="hidden" name="00N5e00000cOMbf" value="App Creators" />
    <input type="hidden" name="retURL" value="https://overwolf.github.io/html/submission-form/success.html" />

    <h1>App Submission Form</h1>

    <div class="inline-fields">
      <div class="field">
        <label for="submission-first-name">First Name</label>
        <input id="submission-first-name" maxlength="40" name="first_name" type="text" required />
      </div>

      <div class="field">
        <label for="submission-last-name">Last Name</label>
        <input id="submission-last-name" maxlength="80" name="last_name" type="text" required />
      </div>
    </div>

    <div class="field">
      <label for="submission-email">
        Email used to register to Overwolf
        <div class="tip">
          <div class="content">
            Please make sure you are registered before submitting an app proposal.<br />
            Your email is needed in order for us to white-list you as a developer.
          </div>
        </div>
      </label>
      <input id="submission-email" maxlength="80" name="email" type="email" required />
    </div>

    <div class="inline-fields">
      <div class="field">
        <label for="submission-app-name">
          App name
        </label>
        <input id="submission-app-name" maxlength="255" name="00N5e00000Yv0tz" type="text" />
      </div>

      <div class="field">
        <label for="submission-url">
          Website <small>(Optional)</small>
        </label>
        <input id="submission-url" maxlength="80" name="url" type="text" />
      </div>
    </div>

    <div class="field select">
      <label for="submission-games">
        Supported Games
        <div class="tip">
          <div class="content">
            Please select games supported by your app.<br />
            You can search and choose multiple games from the list.
          </div>
        </div>
      </label>
      <select id="submission-games" name="00N5e00000YsxRf" multiple required>
        <option value="Other">Other</option>
        <option value="League of Legends">League of Legends</option>
        <option value="Hearthstone">Hearthstone</option>
        <option value="CS:GO">CS:GO</option>
        <option value="Fortnite">Fortnite</option>
        <option value="Valorant">Valorant</option>
        <option value="Teamfight Tactics">Teamfight Tactics</option>
        <option value="Heroes of the Storm">Heroes of the Storm</option>
        <option value="World of Warcraft">World of Warcraft</option>
        <option value="CoD Warzone">CoD Warzone</option>
        <option value="DOTA2">DOTA2</option>
        <option value="Apex Legends">Apex Legends</option>
        <option value="Rainbow Six Siege">Rainbow Six Siege</option>
        <option value="Rocket League">Rocket League</option>
        <option value="Minecraft">Minecraft</option>
        <option value="GTA">GTA</option>
        <option value="Magic the Gathering: Arena">
          Magic the Gathering: Arena
        </option>
        <option value="Halo Infinite">Halo Infinite</option>
        <option value="New World">New World</option>
        <option value="Among Us">Among Us</option>
      </select>
    </div>

    <div class="field other-games">
      <label for="submission-other-games">Other Supported Games</label>
      <input id="submission-other-games" maxlength="80" name="00N5e00000cOtey" type="text" />
    </div>

    <div class="field">
      <label for="submission-idea">Tell us about your app idea</label>
      <textarea id="submission-idea" name="00N5e00000Yv0u4" type="text" wrap="soft" required></textarea>
    </div>

    <div class="field checkbox small-text">
      <input id="submission-agree" name="00N5e00000Yv0uE" type="checkbox" value="1" required />
      <label for="submission-agree">
        <small>I agree to the <a href="/topics/legal/legal-developers-terms"
            target="_blank">developer</a> & <a href="/topics/legal/legal-app-terms"
            target="_blank">app</a>
          terms</small>
      </label>
    </div>

    <button type="submit">Submit</button>
  </form>

  <script>
    document.addEventListener('invalid', e => e.preventDefault(), true);

    function setOtherGames(enabled) {
      $('#submission-other-games').val('');

      if (enabled) {
        $('.other-games').show();
        $('#submission-other-games').prop('required', true);
      } else {
        $('.other-games').hide();
        $('#submission-other-games').prop('required', false);
      }
    }

    function onGamesChanged(enabled) {
      const selected = $('#submission-games').val();

      if (selected && selected.length && selected.includes('Other')) {
        setOtherGames(true);
      } else {
        setOtherGames(false);
      }
    }

    $('#submission-games').select2({
      width: '100%'
    });

    $('#submission-games').on('change', onGamesChanged);

    onGamesChanged();
  </script>
</body>

</html>
